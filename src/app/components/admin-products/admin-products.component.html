<div class="admin-products-container">
  <div class="header">
    <button class="btn-back" (click)="goBack()">← Back to Dashboard</button>
    <h1>Product Management</h1>
    <button class="btn-add" (click)="openAddForm()">+ Add New Product</button>
  </div>

  <!-- Products Table -->
  <div class="section">
    <h2>All Products</h2>
    <div class="table-container" *ngIf="!loading; else loadingTemplate">
      <table class="data-table">
        <thead>
          <tr>
            <th>Image</th>
            <th>Name</th>
            <th>Wholesale Price</th>
            <th>Retail Price</th>
            <th>Quantity</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let product of products">
            <td>
              <img [src]="product.imageUrl || 'assets/placeholder.jpg'"
                   [alt]="product.name"
                   class="product-thumbnail">
            </td>
            <td><strong>{{ product.name }}</strong></td>
            <td class="wholesale">${{ product.wholesalePrice?.toFixed(2) }}</td>
            <td class="price">${{ product.retailPrice?.toFixed(2) }}</td>
            <td>
              <span [class.low-stock]="product.quantity < 10" [class.out-of-stock]="product.quantity === 0">
                {{ product.quantity }}
              </span>
            </td>
            <td>
              <div class="action-buttons">
                <button class="btn-action btn-view" (click)="viewProduct(product.id)">
                  View
                </button>
                <button class="btn-action btn-edit" (click)="editProduct(product)">
                  Edit
                </button>
              </div>
            </td>
          </tr>
          <tr *ngIf="products.length === 0">
            <td colspan="6" class="no-data">No products available</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Add/Edit Product Modal -->
  <div class="modal-overlay" *ngIf="showAddForm" (click)="closeForm()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>{{ editingProduct ? 'Edit Product' : 'Add New Product' }}</h2>
        <button class="btn-close" (click)="closeForm()">✕</button>
      </div>
      <app-product-form
        [product]="editingProduct"
        (save)="saveProduct($event)"
        (cancel)="closeForm()">
      </app-product-form>
    </div>
  </div>
</div>

<ng-template #loadingTemplate>
  <div class="loading">Loading products...</div>
</ng-template>
